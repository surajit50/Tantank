<h2>Select</h2>
<table aria-describedby="tanstack table row select implementation in angular">
  <thead>
    @for (headerGroup of table.getHeaderGroups(); track headerGroup.id) {
      <tr>
        @for (header of headerGroup.headers; track header.id) {
          <th
            [attr.colSpan]="header.colSpan"
            (click)="header.column.toggleSorting()"
          >
            @if (!header.isPlaceholder) {
              @if (header.id == 'select') {
                <input
                  type="checkbox"
                  id="select"
                  [checked]="table.getIsAllRowsSelected()"
                  [indeterminate]="table.getIsSomeRowsSelected()"
                  (change)="table.toggleAllRowsSelected()"
                />
              } @else {
                <ng-container
                  *flexRender="
                      header.column.columnDef.header;
                      props: header.getContext();
                      let headerCell
                    "
                >
                  {{ headerCell }}
                  @if (header.column.getCanSort()) {
                    <span class="material-icons-sharp">
                        {{
                        header.column.getIsSorted() === 'asc'
                          ? 'arrow_drop_up'
                          : header.column.getIsSorted() === 'desc'
                            ? 'arrow_drop_down'
                            : ''
                      }}
                      </span>
                  }
                </ng-container>
                @if (header.column.getCanFilter()) {
                  <Filter [column]="header.column" [table]="table"></Filter>
                }
              }
            }
          </th>
        }
      </tr>
    }
  </thead>
  <tbody>
    @for (row of table.getRowModel().rows; track row.id) {
      <tr>
        @for (cell of row.getVisibleCells(); track cell.id) {
          <td>
            @if (cell.id.endsWith('select')) {
              <input
                type="checkbox"
                id="select"
                [checked]="row.getIsSelected()"
                [disabled]="!row.getCanSelect()"
                [indeterminate]="row.getIsSomeSelected()"
                (change)="row.toggleSelected()"
              />
            } @else {
              <ng-container
                *flexRender="
                    cell.column.columnDef.cell;
                    props: cell.getContext();
                    let renderCell
                  "
              >
                {{ renderCell }}
              </ng-container>
            }
          </td>
        }
      </tr>
    }
  </tbody>
  <tfoot>
  <tr>
    <th>
      <input
        type="checkbox"
        name=""
        id=""
        [checked]="table.getIsAllPageRowsSelected()"
        [indeterminate]="table.getIsSomePageRowsSelected()"
        (change)="table.toggleAllPageRowsSelected()"
      />
    </th>
    <th [attr.colspan]="6">
      Page Rows ({{ table.getRowModel().rows.length }})
    </th>
  </tr>
  </tfoot>
</table>

<div class="pagination-container">
  <div>
    {{ rowSelectionLength() }} of
    {{ table.getPreFilteredRowModel().rows.length }} Total Rows Selected
  </div>
  <div class="pagination-actions">
    <button
      class="pagination-button"
      (click)="table.setPageIndex(0)"
      [disabled]="!table.getCanPreviousPage()"
    >
      <span class="material-icons-sharp">first_page</span>
    </button>
    <button
      class="pagination-button"
      (click)="table.previousPage()"
      [disabled]="!table.getCanPreviousPage()"
    >
      <span class="material-icons-sharp">chevron_left</span>
    </button>
    <button
      class="pagination-button"
      (click)="table.nextPage()"
      [disabled]="!table.getCanNextPage()"
    >
      <span class="material-icons-sharp">chevron_right</span>
    </button>
    <button
      class="pagination-button"
      (click)="table.setPageIndex(table.getPageCount() - 1)"
      [disabled]="!table.getCanNextPage()"
    >
      <span class="material-icons-sharp">last_page</span>
    </button>
    <span class="pagination-info">
      <div>Page</div>
      <strong>
        {{ table.getState().pagination.pageIndex + 1 }} of
        {{ table.getPageCount() }}
      </strong>
    </span>
    <span class="pagination-info">
      | Go to page:
      <input
        type="number"
        [value]="table.getState().pagination.pageIndex + 1"
        (input)="onPageInputChange($event)"
        class="pagination-input"
      />
    </span>
    <select
      [value]="table.getState().pagination.pageSize"
      class="pagination-select"
      (change)="onPageSizeChange($event)"
    >
      @for (pageSize of [10, 20, 30, 40, 50]; track pageSize) {
        <option [value]="pageSize">
          Show {{ pageSize }}
        </option>
      }
    </select>
  </div>
</div>
